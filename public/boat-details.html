<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Boat Details  | Just Enjoy Ibiza Boats</title>
        <meta name="description" content="{{boat.shortDescription}}">
        <meta name="keywords" content="Ibiza, boat charter, boat rental, yacht charter, {{boat.type}}, {{boat.name}}, {{boat.features}}, {{boat.destinations}}, Ibiza boat, Ibiza yacht">
        <link rel="canonical" href="https://justenjoyibizaboats.com/boat/{{boat.slug}}">
        <link rel="shortcut icon" href="/assets/img/favicon-16x16.png" type="image/x-icon">
    
        <link rel="stylesheet" href="/assets/css/boat-details.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Barlow&family=Barlow+Condensed&family=Gilda+Display&display=swap">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link rel="stylesheet" href="/assets/css/plugins.css">
        <link rel="stylesheet" href="/assets/css/style.css">
        <link rel="stylesheet" href="/assets/css/boat-details.css">
        <link rel="icon" href="/assets/img/favicon-16x16.png" type="image/png" sizes="32x32">  <link rel="icon" href="/assets/img/favicon-16x16.png" type="image/png" sizes="16x16">  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png">  <link rel="manifest" href="/site.webmanifest">  <link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg" color="#5bbad5">  <meta name="msapplication-TileColor" content="#da532c">  <meta name="theme-color" content="#ffffff">
        <meta property="og:title" content="Boat Details  | Just Enjoy Ibiza Boats">
        <meta property="og:description" content="{{boat.shortDescription}}">
        <meta property="og:url" content="https://justenjoyibizaboats.com/boat/{{boat.slug}}">
        <meta property="og:image" content="{{boat.imageUrl}}">
        <meta property="og:type" content="website">
    
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Boat Details  | Just Enjoy Ibiza Boats">
        <meta name="twitter:description" content="{{boat.shortDescription}}">
        <meta name="twitter:image" content="{{boat.imageUrl}}">
    
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    
    </head>
<body>
    <!-- boat-details.html -->
   <div class="boat-details-page">
    <!-- Navigation -->
    <div class="boat-header">
        <a href="#" class="back-button" onclick="history.back()">
            <i class="fas fa-arrow-left"></i> BACK TO SELECTION
        </a>
        <button class="favorite-btn">
            <i class="far fa-heart"></i>
        </button>
    </div>

    <!-- Main Gallery -->
    <div class="main-gallery">
        <div class="main-image">
            <img src="" alt="Main boat image" id="mainGalleryImage">
        </div>
        
        <!-- Info Overlay -->
        <div class="boat-info-overlay">
            <h1 class="boat-title" id="boatName">Vanquish 80</h1>
            
            <div class="quick-specs-bar">
                <div class="spec-item">
                    <span class="value" id="length"></span>
                    <span class="label">LENGTH</span>
                </div>
                <div class="spec-item">
                    <span class="value" id="built"></span>
                    <span class="label">BUILT/REFIT</span>
                </div>
                <div class="spec-item">
                    <span class="value" id="guests"></span>
                    <span class="label">GUESTS</span>
                </div>
                <div class="spec-item">
                    <span class="value" id="cabins">-</span>
                    <span class="label">CABINS</span>
                </div>
                <div class="spec-item">
                    <span class="value" id="crew"></span>
                    <span class="label">CREW</span>
                </div>
            </div>
            
            <div class="price-section">
                <div class="price-info">
                    <span class="value" id="price">â‚¬10,500</span>
                    <span class="period">per day</span>
                </div>
                <button class="btn btn-sm btn-book" onclick="openInquiryModal(this)">
                    <i class="fas fa-envelope"></i> Check Availability
                </button>
            </div>
        </div>
    </div>

    <div id="inquiryModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Check Boat Availability</h2>
            <form id="inquiryForm">
                <input type="text" name="name" placeholder="Your Name" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="tel" name="phone" placeholder="Phone">
                <select name="passengers" required>
                <option value="" disabled selected>Number of Passengers</option>
                <option value="1">1 Passenger</option>
                <option value="2">2 Passengers</option>
                <option value="3">3 Passengers</option>
                <option value="4">4 Passengers</option>
                <option value="5">5 Passengers</option>
                <option value="6">6 Passengers</option>
                <option value="7">7 Passengers</option>
                <option value="8">8 Passengers</option>
                <option value="9">9 Passengers</option>
                <option value="10">10 Passengers</option>
                <option value="11">11 Passengers</option>
                <option value="12">12 Passengers</option>
                </select>
                <input type="date" name="date" required>
                <textarea name="message" placeholder="Message"></textarea>
                <button type="submit">Send Inquiry</button>
            </form>
        </div>
    </div>

    <!-- Thumbnails -->
    <div class="thumbnail-grid" id="thumbnailGrid">
        <!-- Thumbnails injected by JS -->
    </div>

    <!-- Content Navigation -->
    <div class="content-tabs">
        <button class="tab-btn active" data-tab="description">DESCRIPTION</button>
        <button class="tab-btn" data-tab="specification">SPECIFICATION</button>
        <button class="tab-btn" data-tab="location">Boat Price</button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
        <div class="tab-pane active" id="description">
            <h3>A LITTLE MORE ABOUT</h3>
            <h2 id="boatNameDesc"></h2>
            <div class="desc-content" id="boatDescription"></div>
        </div>

        <div class="tab-pane" id="specification">
            <h2>SPECIFICATION: <span id="boatNameSpec"></span></h2>
            <div class="specs-grid">
                <!-- Specifications injected by JS -->
            </div>
        </div>

     
        <div class="tab-pane" id="location">
            <div class="rates-container">
                <div class="rates-header">
                    <h2>SEASONAL RATES</h2>
                    <span class="season-title">SUMMER SEASON</span>
                    <span class="date-range">MAY - OCTOBER</span>
                </div>

                <div class="rates-grid">
                    <div class="rate-card">
                        <div class="rate-period">MAY & OCTOBER</div>
                        <div class="rate-amount">
                            <span class="label">From</span>
                            <span class="price"><span id="winterLowRate"></span></span>
                            <span class="period">per day</span>
                        </div>
                    </div>

                    <div class="rate-card">
                        <div class="rate-period">JUNE & SEPTEMBER</div>
                        <div class="rate-amount">
                            <span class="label">From</span>
                            <span class="price"><span id="summerLowRate"></span></span>
                            <span class="period">per day</span>
                        </div>
                    </div>

                    <div class="rate-card highlight">
                        <div class="rate-period">JULY & AUGUST</div>
                        <div class="rate-amount">
                            <span class="label">From</span>
                            <span class="price"><span id="summerHighRate"></span></span>
                            <span class="period">per day</span>
                        </div>
                    </div>
                </div>

                <div class="rates-footer">
                    <div class="rate-notes">
                        <p>* All prices are per day</p>
                        <p>* Fuel consumption not included</p>
                        <p>* VAT not included</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Actions -->
    <div class="boat-actions">
        <button class="action-btn" data-boat-id="${boatId}">
            <i class="fas fa-plus"></i> ADD TO COMPARE
        </button>
        <button class="action-btn download-brochure" data-boat-id="${boatId}">
            <i class="fas fa-download"></i> BROCHURE
        </button>
        <button class="action-btn" data-boat-id="${boatId}">
            <i class="fas fa-share-alt"></i> SHARE
        </button>
    </div>
</div>
<script src="assets/js/brochure-download.js" ></script>
<script src="/assets/js/boat-details.js"></script>
    <script>
        function getBoatSlugFromURL() {
      const pathParts = window.location.pathname.split('/');
      return pathParts[pathParts.length - 1]; // Get the last part of the path
    }

    function displayBoatDetails(boatData) {
      const container = document.getElementById('boat-details-container');
      container.innerHTML = `
        <h2>${boatData.name}</h2>
        <p>${boatData.description}</p>
        `;
    }

    function fetchBoatData(slug) {
      const boatRef = db.collection('boats').where('slug', '==', slug);
      boatRef.get().then((querySnapshot) => {
        if (!querySnapshot.empty) {
          const boatData = querySnapshot.docs[0].data();
          displayBoatDetails(boatData);
        } else {
          // Handle boat not found (e.g., display an error message)
          document.getElementById('boat-details-container').innerHTML = "<p>Boat not found.</p>";
        }
      }).catch((error) => {
        console.error("Error fetching boat data:", error);
      });
    }

    // Client-side routing:
    const boatSlug = getBoatSlugFromURL();

    if (boatSlug) { // If there's a slug in the URL
      fetchBoatData(boatSlug);
    } else {
      // Handle cases where there's no slug (e.g., redirect to the main boat listing page)
      window.location.href = "/boats"; // Example redirect
    }
    </script>
   <!--  Modal -->
    <script>
    // Modal functionality
function openInquiryModal(btn) {
    const modal = document.getElementById('inquiryModal');
    const priceSection = btn.closest('.price-section');
    const price = priceSection.querySelector('#price').textContent;
    
    // Get the boat name from the page
    const boatName = document.getElementById('boatName').textContent;
    
    modal.style.display = "block";
    
    const form = modal.querySelector('#inquiryForm');
    
    // Reset form on open
    form.reset();
    
    form.onsubmit = async (e) => {
        e.preventDefault();
        
        // Disable submit button to prevent double submission
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';
        
        try {
            // Get form data
            const formData = {
                boatName: boatName, // Add boat name to form data
                price: price,
                name: form.querySelector('[name="name"]').value,
                email: form.querySelector('[name="email"]').value,
                phone: form.querySelector('[name="phone"]').value,
                passengers: form.querySelector('[name="passengers"]').value, // Add passengers to form data
                date: form.querySelector('[name="date"]').value,
                message: form.querySelector('[name="message"]').value,
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                status: 'new' // Add status for inquiry tracking
            };

            // Send to Firebase
            await db.collection('inquiries').add(formData);
            
            // Success handling
            modal.style.display = "none";
            alert('Inquiry sent successfully! We will contact you shortly.');
            form.reset();
            
        } catch (error) {
            console.error('Error:', error);
            alert('Error sending inquiry. Please try again.');
        } finally {
            // Re-enable submit button
            submitBtn.disabled = false;
            submitBtn.textContent = 'Send Inquiry';
        }
    };
}

// Modal close functionality
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('inquiryModal');
    const closeBtn = modal.querySelector('.close');
    
    // Close button handler
    closeBtn.onclick = function() {
        modal.style.display = "none";
    }
    
    // Click outside modal to close
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    
    // Close on escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape" && modal.style.display === "block") {
            modal.style.display = "none";
        }
    });
});
   </script>
    
</div>
</body>
</html>
